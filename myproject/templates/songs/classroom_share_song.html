{% extends 'base.html' %}
{% load static %}

{% block title %}{% if is_english %}Share Song{% elif is_spanish %}Compartir Canción{% elif is_german %}Lied teilen{% elif is_chinese %}分享歌曲{% else %}楽曲を共有{% endif %} - {{ classroom.name }} - UTAMEMO{% endblock %}

{% block content %}
<style>
    .share-page {
        min-height: calc(100vh - 200px);
        padding: 3rem 1rem;
    }
    
    .share-header {
        text-align: center;
        margin-bottom: 3rem;
    }
    
    .share-title {
        font-size: 2.5rem;
        font-weight: 800;
        color: #2d1b13;
        margin-bottom: 0.75rem;
    }
    
    .share-subtitle {
        font-size: 1.1rem;
        color: #8a6b5a;
        margin-bottom: 1rem;
    }
    
    .classroom-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        background: linear-gradient(135deg, #ff7940 0%, #ff6b35 100%);
        color: white;
        padding: 0.6rem 1.25rem;
        border-radius: 25px;
        font-weight: 700;
        font-size: 1rem;
    }
    
    .songs-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 1.5rem;
        max-width: 1200px;
        margin: 0 auto;
    }
    
    .song-card {
        background: #ffffff;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(45, 27, 19, 0.1);
        padding: 1.5rem;
        transition: all 0.3s ease;
    }
    .song-card:hover {
        transform: translateY(-4px);
        box-shadow: 0 15px 50px rgba(45, 27, 19, 0.15);
    }
    
    .song-title {
        font-size: 1.25rem;
        font-weight: 700;
        color: #2d1b13;
        margin-bottom: 0.5rem;
    }
    
    .song-artist {
        font-size: 0.95rem;
        color: #5c3a2a;
        margin-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }
    
    .song-genre {
        display: inline-block;
        background: #fef9f7;
        color: #ff7940;
        font-size: 0.8rem;
        font-weight: 600;
        padding: 0.35rem 0.85rem;
        border-radius: 20px;
        margin-bottom: 1rem;
        border: 1px solid #f0e6e0;
    }
    
    .song-audio {
        width: 100%;
        height: 48px;
        border-radius: 12px;
        margin-bottom: 1rem;
    }
    
    .share-btn {
        width: 100%;
        padding: 1rem;
        font-size: 1.05rem;
        font-weight: 700;
        background: linear-gradient(135deg, #ff7940 0%, #ff6b35 100%);
        color: white;
        border: none;
        border-radius: 14px;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.6rem;
        box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
    }
    .share-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 35px rgba(255, 107, 53, 0.4);
    }
    
    .empty-state {
        text-align: center;
        padding: 4rem 2rem;
        background: #ffffff;
        border-radius: 28px;
        box-shadow: 0 20px 60px rgba(45, 27, 19, 0.1);
        max-width: 500px;
        margin: 0 auto;
    }
    .empty-state-icon {
        width: 90px;
        height: 90px;
        background: linear-gradient(135deg, #ff7940 0%, #ff6b35 100%);
        border-radius: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        margin: 0 auto 1.5rem;
        box-shadow: 0 12px 35px rgba(255, 107, 53, 0.3);
    }
    .empty-state-icon i {
        font-size: 2.5rem;
        color: white;
    }
    .empty-state h4 {
        font-size: 1.5rem;
        font-weight: 700;
        color: #2d1b13;
        margin-bottom: 0.75rem;
    }
    .empty-state p {
        color: #8a6b5a;
        font-size: 1rem;
        margin-bottom: 1.5rem;
    }
    .create-song-btn {
        display: inline-flex;
        align-items: center;
        gap: 0.6rem;
        padding: 1rem 2rem;
        background: linear-gradient(135deg, #ff7940 0%, #ff6b35 100%);
        color: white;
        border: none;
        border-radius: 14px;
        font-size: 1.1rem;
        font-weight: 700;
        text-decoration: none;
        transition: all 0.3s ease;
        box-shadow: 0 8px 25px rgba(255, 107, 53, 0.3);
    }
    .create-song-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 12px 35px rgba(255, 107, 53, 0.4);
        color: white;
    }
    
    .back-link {
        text-align: center;
        margin-top: 3rem;
    }
    .back-link a {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        color: #8a6b5a;
        text-decoration: none;
        font-size: 1rem;
        font-weight: 600;
        transition: all 0.3s ease;
    }
    .back-link a:hover {
        color: #ff7940;
    }
    
    @media (max-width: 576px) {
        .share-title {
            font-size: 2rem;
        }
        .songs-grid {
            grid-template-columns: 1fr;
        }
        .song-card {
            padding: 1.25rem;
        }
    }
</style>

<div class="container share-page">
    <div class="share-header">
        <h1 class="share-title">{% if is_english %}Share Song{% elif is_spanish %}Compartir Canción{% elif is_german %}Lied teilen{% elif is_portuguese %}Compartilhar Música{% elif is_chinese %}分享歌曲{% else %}楽曲を共有{% endif %}</h1>
        <p class="share-subtitle">{% if is_english %}Select a song to share with your class{% elif is_spanish %}Selecciona una canción para compartir con tu clase{% elif is_german %}Wähle ein Lied zum Teilen mit deiner Klasse{% elif is_portuguese %}Selecione uma música para compartilhar com sua turma{% elif is_chinese %}选择要分享到班级的歌曲{% else %}クラスに共有する楽曲を選択してください{% endif %}</p>
        <div class="classroom-badge">
            <i class="bi bi-mortarboard-fill"></i>
            {{ classroom.name }}
        </div>
    </div>
    
    {% if my_songs %}
    <div class="songs-grid">
        {% for song in my_songs %}
        <div class="song-card">
            <div class="song-title">{{ song.title }}</div>
            <div class="song-artist">
                <i class="bi bi-person-fill"></i>
                {{ song.artist }}
            </div>
            {% if song.genre %}
            <span class="song-genre">{{ song.genre }}</span>
            {% endif %}
            {% if song.audio_url %}
            <audio controls controlsList="nodownload" class="song-audio">
                <source src="{{ song.audio_url }}" type="audio/mpeg">
            </audio>
            {% endif %}
            <form method="post">
                {% csrf_token %}
                <input type="hidden" name="song_id" value="{{ song.pk }}">
                <button type="submit" class="share-btn">
                    <i class="bi bi-share-fill"></i>
                    {% if is_english %}Share to Class{% elif is_spanish %}Compartir a Clase{% elif is_german %}Mit Klasse teilen{% elif is_portuguese %}Compartilhar com Turma{% elif is_chinese %}分享到班级{% else %}クラスに共有{% endif %}
                </button>
            </form>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-state-icon">
            <i class="bi bi-music-note-beamed"></i>
        </div>
        <h4>{% if is_english %}No songs to share{% elif is_spanish %}No hay canciones para compartir{% elif is_german %}Keine Lieder zum Teilen{% elif is_portuguese %}Nenhuma música para compartilhar{% elif is_chinese %}没有可分享的歌曲{% else %}共有できる楽曲がありません{% endif %}</h4>
        <p>{% if is_english %}Create a song first or all your songs are already shared{% elif is_spanish %}Crea una canción primero o todas tus canciones ya están compartidas{% elif is_german %}Erstelle zuerst ein Lied oder alle deine Lieder sind bereits geteilt{% elif is_portuguese %}Crie uma música primeiro ou todas as suas músicas já estão compartilhadas{% elif is_chinese %}请先创建歌曲或所有歌曲已被分享{% else %}まず楽曲を作成するか、全ての楽曲が既に共有されています{% endif %}</p>
        <a href="{% url 'songs:upload_image' %}" class="create-song-btn">
            <i class="bi bi-plus-lg"></i>
            {% if is_english %}Create Song{% elif is_spanish %}Crear Canción{% elif is_german %}Lied erstellen{% elif is_portuguese %}Criar Música{% elif is_chinese %}创建歌曲{% else %}楽曲を作成{% endif %}
        </a>
    </div>
    {% endif %}
    
    <div class="back-link">
        <a href="{% url 'songs:classroom_detail' classroom.pk %}">
            <i class="bi bi-arrow-left"></i>
            {% if is_english %}Back to Class{% elif is_spanish %}Volver a Clase{% elif is_german %}Zurück zur Klasse{% elif is_portuguese %}Voltar para Turma{% elif is_chinese %}返回班级{% else %}クラスに戻る{% endif %}
        </a>
    </div>
</div>
{% endblock %}
